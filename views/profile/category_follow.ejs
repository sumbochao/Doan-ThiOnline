<!DOCTYPE html>
<html>

<head>
    <title class="next-head">Chọn danh mục theo dõi</title>
    <meta charSet="utf-8" class="next-head" />
    <meta name="description" content="Nền tảng đề thi trực tuyến giúp mọi cá nhân chia sẻ và phát triển kiến thức của mình.    " class="next-head" />
    <meta name="keywords" content="trắc nghiệm trực tuyến, đề thi trắc nghiệm, trắc nghiệm tiếng anh, ôn thi THPT quốc gia, ôn luyện đại học, interview, test" class="next-head" />
    <link rel="shortcut icon" type="image/png" href="../images/logo-icon.png" />
    <link rel="apple-touch-icon" href="../images/logo-icon.png" />
    <link rel="stylesheet" href="../css/house.css" />
    <script src="/jquery.min.js"></script>
    <link href="/dist/vendors/pace-progress/css/pace.min.css" rel="stylesheet">
</head>

<body>
    <%- include('../block/header')%>
    <div class="clearfix__Clearfix-w9lses-0 kQttEW" height="50"></div>
    <div class="wrapper Wrapper-mxjqhp-0 fPglrh">
        <div class="Wrapper__Container-mxjqhp-1">
            <div class="icon-message__Container-sc-1rdjyy1-1 jerbyQ">
                <div class="icon"><img class="icon-message__ImageView-sc-1rdjyy1-0 gnwBqT" src="/images/bulb.png">
                </div>
                <div class="message">
                    <h4 class="bp3-heading">Bạn quan tâm đến những chuyên mục nào?</h4>
                    <div>Điều này sẽ giúp chúng tôi gợi ý các tag phù hợp với các chuyên mục bạn yêu thích?</div>
                </div>
            </div>
            <div class="content">
                <div class="categoryList fadeIn animated">
                    <div class="tag-category-list__Container-sc-19ppbdx-0 bJpGVS">
                        <div class="catergoryItem">
                            <div class="category-item__Container-sc-1kdsauq-1 bfbYiL">
                                <div class="image category-item__Image-sc-1kdsauq-0 dmkrxu" style="background-image:url(/images/dai_hoc.png);"></div>
                                <div class="overlay"></div><span class="text">Đại học</span>
                                <div class="bottomRight"><label class="bp3-control bp3-checkbox"><input type="checkbox" name="category"><span
                                            class="bp3-control-indicator"></span></label></div>
                            </div>
                        </div>
                        <div class="catergoryItem">
                                <div class="category-item__Container-sc-1kdsauq-1 bfbYiL">
                                    <div class="image category-item__Image-sc-1kdsauq-0 dmkrxu" style="background-image:url(/images/thcs_thpt.png)"></div>
                                    <div class="overlay"></div><span class="text">THCS &amp; THPT</span>
                                    <div class="bottomRight"><label class="bp3-control bp3-checkbox"><input type="checkbox" name="category"><span
                                                class="bp3-control-indicator"></span></label></div>
                                </div>
                            </div>
                        <div class="catergoryItem">
                            <div class="category-item__Container-sc-1kdsauq-1 bfbYiL">
                                <div class="image category-item__Image-sc-1kdsauq-0 dmkrxu"  style="background-image:url(/images/program.png)"></div>
                                <div class="overlay"></div><span class="text">Lập trình</span>
                                <div class="bottomRight"><label class="bp3-control bp3-checkbox"><input type="checkbox" name="category"><span
                                            class="bp3-control-indicator"></span></label></div>
                            </div>
                        </div>
                        <div class="catergoryItem">
                                <div class="category-item__Container-sc-1kdsauq-1 bfbYiL">
                                    <div class="image category-item__Image-sc-1kdsauq-0 dmkrxu" style="background-image:url(/images/chuyenmon.png)"></div>
                                    <div class="overlay"></div><span class="text">Chuyên môn</span>
                                    <div class="bottomRight"><label class="bp3-control bp3-checkbox"><input type="checkbox" name="category"><span
                                                class="bp3-control-indicator"></span></label></div>
                                </div>
                            </div>
                            <div class="catergoryItem">
                                    <div class="category-item__Container-sc-1kdsauq-1 bfbYiL">
                                        <div class="image category-item__Image-sc-1kdsauq-0 dmkrxu" style="background-image:url(/images/english.png)"></div>
                                        <div class="overlay"></div><span class="text">Tiếng Anh</span>
                                        <div class="bottomRight"><label class="bp3-control bp3-checkbox"><input type="checkbox" name="category"><span
                                                    class="bp3-control-indicator"></span></label></div>
                                    </div>
                                </div>
                        <div class="catergoryItem">
                            <div class="category-item__Container-sc-1kdsauq-1 bfbYiL">
                                <div class="image category-item__Image-sc-1kdsauq-0 dmkrxu"  style="background-image:url(/images/language.png)" ></div>
                                <div class="overlay"></div><span class="text">Ngôn ngữ khác</span>
                                <div class="bottomRight"><label class="bp3-control bp3-checkbox"><input type="checkbox" name="category"><span
                                            class="bp3-control-indicator"></span></label></div>
                            </div>
                        </div>
                        
                        
                        <div class="catergoryItem">
                            <div class="category-item__Container-sc-1kdsauq-1 bfbYiL">
                                <div class="image category-item__Image-sc-1kdsauq-0 dmkrxu" style="background-image:url(/images/xahoi.png)"></div>
                                <div class="overlay"></div><span class="text">Kiến thức xã hội</span>
                                <div class="bottomRight"><label class="bp3-control bp3-checkbox"><input type="checkbox" name="category"><span
                                            class="bp3-control-indicator"></span></label></div>
                            </div>
                        </div>
                    </div>
                </div><button type="button" onclick = "addFollow()" class="bp3-button bp3-large bp3-intent-primary"
                    tabindex="-1"><span class="bp3-icon bp3-icon-circle-arrow-right" icon="circle-arrow-right"><svg
                            data-icon="circle-arrow-right" width="16" height="16" viewBox="0 0 16 16">
                            <desc>circle-arrow-right</desc>
                            <path
                                d="M8.71 4.29a1.003 1.003 0 0 0-1.42 1.42L8.59 7H5c-.55 0-1 .45-1 1s.45 1 1 1h3.59L7.3 10.29c-.19.18-.3.43-.3.71a1.003 1.003 0 0 0 1.71.71l3-3c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71l-3-3zM8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"
                                fill-rule="evenodd"></path>
                        </svg></span><span class="bp3-button-text">Tiếp theo</span></button>
            </div>
    </div>

    </div>

    </div><input type="hidden" id ="idUser" value = "<%- info.id%>">
        <input type = "hidden" id="checked" value = "<%- info.category_followed %>">

    <div class="clearfix__Clearfix-w9lses-0 kQttEW" height="50"></div>
    <%- include('../block/footer')%>

</body>
    <script>
        $(document).ready(()=>{
            if($('#checked').val() !== ''){
                let checked = document.getElementsByName('category');
                let overlay = document.getElementsByClassName('overlay');

                let arr = $('#checked').val().split(',');
                arr.forEach(e => {
                    checked[e-1].checked = true;
                    overlay[e-1].style.backgroundColor = 'transparent'
                })
            }
        })
        function addFollow(){
            let arr = [];
            let checked = document.getElementsByName('category');
            checked.forEach((e,i) => {
                if(e.checked === true) arr.push(i+1);
            })
            if(arr.length == 0) {
                alert("Bạn phải chọn ít nhất 1 danh mục");
                return false;
            }
            const data = {
                id:$('#idUser').val(),
                category_followed:arr.toString()
            }
            fetch('/api/user', {
                method: "PUT",
                headers:{
                'Content-Type': 'application/json',
                },
                body:JSON.stringify(data)
            })
            .then(function(response) {
                location.href = "/"
            })
            
            .catch(err=>{
                alert("Server đang lỗi,vui lòng thử lại sau.");
                console.log(err)
            });
        }
        
        $('.catergoryItem').click(function (){
            $(this).find('input[type=checkbox]').prop("checked") ? 
                $(this).find('.overlay').css('background-color','')
            :   $(this).find('.overlay').css('background-color','transparent')
            $(this).find('input[type=checkbox]').prop("checked", !$(this).find('input[type=checkbox]').prop("checked"));
        });
    </script>
    <script src="/dist/node_modules/pace-progress/pace.min.js"></script>

</html>